from flask import Flask, request, jsonify, render_template_string
import random, string

app = Flask(__name__)
PORT = 5055

keys_db = {}
loadstrings_db = {}
kill_switch_active = False

HTML = """<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zenith Key System</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<style>
body { background:#0a0a0a;color:#fff;font-family:'Segoe UI',sans-serif; }
.navbar{background:rgba(10,10,10,.95);padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid #0066ff;}
.nav-links a{color:#fff;text-decoration:none;padding:.5rem 1rem;border-radius:6px;}
.nav-links a:hover{background:#0066ff;}
.container{max-width:1200px;margin:0 auto;padding:2rem;}
.page-content{display:none;}
.page-content.active{display:block;}
.output, .code-output{background:#111;padding:1rem;border-radius:6px;font-family:'Consolas',monospace;overflow:auto;}
.btn{padding:.7rem 1.5rem;border:none;border-radius:6px;color:#fff;cursor:pointer;margin-top:.5rem;}
.btn-blue{background:#0066ff;}
.btn-green{background:#00cc66;}
.btn-red{background:#ff3333;}
</style>
</head>
<body>
<nav class="navbar">
<div class="logo"><i class="fas fa-crown"></i> ZENITH</div>
<div class="nav-links">
<a href="#" onclick="showPage('home')">Home</a>
<a href="#" onclick="showPage('keygen')">Key Generator</a>
<a href="#" onclick="showPage('obfuscator')">Obfuscator</a>
<a href="#" onclick="showPage('loadstring')">Loadstring</a>
<a href="#" onclick="showPage('export')">Export</a>
</div>
</nav>
<div class="container">
<div id="home" class="page-content active">
<h1 style="color:#0066ff;">ZENITH KEY SYSTEM</h1>
<div class="output">
Total Keys: <span id="totalKeys">0</span><br>
Active: <span id="activeKeys">0</span><br>
Loadstrings: <span id="loadstringCount">0</span>
</div>
</div>
<div id="keygen" class="page-content">
<h1 style="color:#0066ff;">Key Generator</h1>
Amount: <input type="number" id="amount" value="10"><br>
Type: 
<select id="keyType">
<option value="lifetime">Lifetime</option>
<option value="day">Day-Locked</option>
</select><br>
<div id="daysBox" style="display:none;">Days: <input type="number" id="days" value="30"></div>
<button class="btn btn-blue" onclick="generateKeys()">Generate Keys</button>
<div class="output" id="keyOutput">Keys will appear here</div>
Key to check: <input type="text" id="checkKey">
<button class="btn btn-green" onclick="checkKey()">Verify Key</button>
<div class="output" id="checkResult"></div>
</div>
<div id="obfuscator" class="page-content">
<h1 style="color:#0066ff;">Obfuscator</h1>
<textarea id="luaCode" placeholder="-- Lua code" style="width:100%;height:150px;"></textarea><br>
<button class="btn btn-blue" onclick="obfuscateCode()">Obfuscate</button>
<div class="code-output" id="obfResult">-- Obfuscated code here</div>
</div>
<div id="loadstring" class="page-content">
<h1 style="color:#0066ff;">Loadstring Protection</h1>
<textarea id="loadstringCode" placeholder="-- Lua code to protect" style="width:100%;height:150px;"></textarea><br>
<button class="btn btn-blue" onclick="createLoadstring()">Create Loadstring</button>
<div class="output" id="loadstringOutput"></div>
</div>
<div id="export" class="page-content">
<h1 style="color:#0066ff;">Export Keys</h1>
<button class="btn btn-blue" onclick="exportKeys('txt')">TXT</button>
<button class="btn btn-blue" onclick="exportKeys('json')">JSON</button>
<button class="btn btn-blue" onclick="exportKeys('csv')">CSV</button>
<div class="output" id="exportInfo">Select format to export</div>
</div>
</div>
<script>
function showPage(page){document.querySelectorAll('.page-content').forEach(p=>p.style.display='none');document.getElementById(page).style.display='block';}
document.getElementById('keyType').addEventListener('change', function(){document.getElementById('daysBox').style.display=this.value==='day'?'block':'none';});
async function loadStats(){let res=await fetch('/api/stats');let data=await res.json();document.getElementById('totalKeys').textContent=data.total;document.getElementById('activeKeys').textContent=data.active;document.getElementById('loadstringCount').textContent=data.loadstrings||0;}
async function generateKeys(){let amount=document.getElementById('amount').value;let type=document.getElementById('keyType').value;let days=type==='day'?document.getElementById('days').value:null;let res=await fetch('/api/generate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({amount,type,days})});let data=await res.json();document.getElementById('keyOutput').innerHTML=data.keys.map(k=>`<div>${k}</div>`).join('');loadStats();alert(`Generated ${data.keys.length} keys`);}
async function checkKey(){let key=document.getElementById('checkKey').value;let res=await fetch(`/api/check/${key}`);let data=await res.json();let result=document.getElementById('checkResult');if(data.valid){result.innerHTML='<div style="color:#00cc66">‚úÖ Valid ('+data.type+')</div>'}else{result.innerHTML='<div style="color:#ff3333">‚ùå '+data.error+'</div>'}}
async function obfuscateCode(){let code=document.getElementById('luaCode').value;let res=await fetch('/api/obfuscate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({code})});let data=await res.json();if(data.success){document.getElementById('obfResult').textContent=data.obfuscated;alert('Code obfuscated');}}
async function createLoadstring(){let code=document.getElementById('loadstringCode').value;if(!code || code.length<10){alert('Enter valid code');return;}let res=await fetch('/api/loadstring/create',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({code})});let data=await res.json();if(data.success){document.getElementById('loadstringOutput').innerHTML=`Loadstring ID: ${data.loadstring_id}<br>Access Key: ${data.access_key}<br><pre>${data.loadstring_code}</pre>`;loadStats();}}
function exportKeys(format){window.open(`/api/export/${format}`,'_blank');document.getElementById('exportInfo').innerHTML=`Exporting ${format}`;}
document.addEventListener('DOMContentLoaded',()=>{loadStats();showPage('home');setInterval(loadStats,5000);});
</script>
</body>
</html>
"""

@app.route('/api/stats')
def stats():
    return jsonify({"total": len(keys_db), "active": sum(1 for k in keys_db.values() if k.get("active")), "loadstrings": len(loadstrings_db)})

@app.route('/api/generate', methods=['POST'])
def generate():
    data = request.json
    amount = int(data.get('amount', 10))
    type_ = data.get('type', 'lifetime')
    days = int(data.get('days', 30)) if data.get('days') else None
    new_keys = []
    for _ in range(amount):
        key = ''.join(random.choices(string.ascii_uppercase+string.digits, k=10))
        keys_db[key] = {"type": type_, "days": days, "active": True}
        new_keys.append(key)
    return jsonify({"success": True, "keys": new_keys})

@app.route('/api/check/<key>')
def check(key):
    if key in keys_db:
        return jsonify({"valid": True, "type": keys_db[key]["type"]})
    return jsonify({"valid": False, "error": "Key not found"})

@app.route('/api/obfuscate', methods=['POST'])
def obfuscate():
    code = request.json.get('code', '')
    obf = ''.join(random.choice(string.ascii_letters) for _ in range(len(code)))
    return jsonify({"success": True, "obfuscated": obf})

@app.route('/api/loadstring/create', methods=['POST'])
def create_loadstring():
    code = request.json.get('code', '')
    ls_id = ''.join(random.choices(string.ascii_uppercase+string.digits, k=6))
    access_key = ''.join(random.choices(string.ascii_uppercase+string.digits, k=8))
    loadstrings_db[ls_id] = {"code": code, "access_key": access_key}
    return jsonify({"success": True, "loadstring_id": ls_id, "access_key": access_key, "loadstring_code": f"loadstring('{code}')()"})

@app.route('/api/export/<fmt>')
def export(fmt):
    return jsonify({"format": fmt, "keys": list(keys_db.keys())})

@app.route('/')
def index():
    return render_template_string(HTML, port=PORT)

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=PORT)        }
        
        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--gray);
        }
        
        .close-btn {
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .sidebar-links {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .sidebar-links a {
            color: var(--light);
            text-decoration: none;
            padding: 1rem;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .sidebar-links a:hover {
            background: rgba(0, 102, 255, 0.1);
        }
        
        /* MAIN CONTENT */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        /* HERO */
        .hero {
            text-align: center;
            padding: 4rem 2rem;
            margin-bottom: 3rem;
            background: linear-gradient(135deg, rgba(0, 102, 255, 0.1), transparent);
            border-radius: 15px;
            border: 1px solid var(--blue);
        }
        
        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--blue);
        }
        
        .hero p {
            font-size: 1.2rem;
            color: #aaa;
            max-width: 600px;
            margin: 0 auto 2rem;
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-top: 2rem;
        }
        
        .stat-box {
            text-align: center;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--blue);
        }
        
        .stat-label {
            color: #888;
            font-size: 0.9rem;
        }
        
        /* DASHBOARD */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .card {
            background: rgba(30, 30, 40, 0.8);
            border: 1px solid var(--gray);
            border-radius: 10px;
            padding: 2rem;
            transition: 0.3s;
        }
        
        .card:hover {
            border-color: var(--blue);
            transform: translateY(-5px);
        }
        
        .card h3 {
            color: var(--blue);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* FORMS */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: #aaa;
        }
        
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--gray);
            border-radius: 6px;
            color: var(--light);
            font-size: 1rem;
        }
        
        .form-textarea {
            min-height: 150px;
            resize: vertical;
            font-family: 'Consolas', monospace;
        }
        
        /* BUTTONS */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
        }
        
        .btn-blue {
            background: var(--blue);
            color: white;
        }
        
        .btn-green {
            background: var(--green);
            color: white;
        }
        
        .btn-red {
            background: var(--red);
            color: white;
        }
        
        .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        /* OUTPUT */
        .output {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--gray);
            border-radius: 6px;
            padding: 1.5rem;
            margin-top: 1rem;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }
        
        .code-output {
            background: #111;
            color: var(--green);
            padding: 1.5rem;
            border-radius: 6px;
            font-family: 'Consolas', monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        
        /* FEATURE CARD */
        .feature-card {
            background: rgba(0, 102, 255, 0.05);
            border-left: 4px solid var(--blue);
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-radius: 0 8px 8px 0;
        }
        
        .feature-card h4 {
            color: var(--blue);
            margin-bottom: 0.5rem;
        }
        
        /* FOOTER */
        .footer {
            text-align: center;
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid var(--gray);
            color: #666;
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .menu-btn {
                display: flex;
            }
            
            .nav-links {
                display: none;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .stats {
                flex-direction: column;
                gap: 1.5rem;
            }
            
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- NAVBAR -->
    <nav class="navbar">
        <div class="logo">
            <i class="fas fa-crown"></i>
            <span>ZENITH</span>
        </div>
        
        <div class="nav-links">
            <a href="#" onclick="showPage('home')">Home</a>
            <a href="#" onclick="showPage('keygen')">Key Generator</a>
            <a href="#" onclick="showPage('obfuscator')">Obfuscator</a>
            <a href="#" onclick="showPage('loadstring')">Loadstring</a>
            <a href="#" onclick="showPage('export')">Export</a>
        </div>
        
        <div class="menu-btn" onclick="toggleSidebar()">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>
    
    <!-- SIDEBAR -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3>Menu</h3>
            <button class="close-btn" onclick="toggleSidebar()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="sidebar-links">
            <a href="#" onclick="showPage('home'); toggleSidebar();">
                <i class="fas fa-home"></i> Home
            </a>
            <a href="#" onclick="showPage('keygen'); toggleSidebar();">
                <i class="fas fa-key"></i> Key Generator
            </a>
            <a href="#" onclick="showPage('obfuscator'); toggleSidebar();">
                <i class="fas fa-lock"></i> Obfuscator
            </a>
            <a href="#" onclick="showPage('loadstring'); toggleSidebar();">
                <i class="fas fa-code"></i> Loadstring Protection
            </a>
            <a href="#" onclick="showPage('killswitch'); toggleSidebar();">
                <i class="fas fa-power-off"></i> Kill Switch
            </a>
            <a href="#" onclick="showPage('export'); toggleSidebar();">
                <i class="fas fa-file-export"></i> Export
            </a>
        </div>
    </div>
    
    <!-- MAIN CONTENT -->
    <div class="container">
        <!-- HOME PAGE -->
        <div id="home" class="page-content active">
            <div class="hero">
                <h1>ZENITH KEY SYSTEM</h1>
                <p>Professional key management and script protection platform</p>
                
                <div class="stats">
                    <div class="stat-box">
                        <div class="stat-number" id="totalKeys">0</div>
                        <div class="stat-label">Total Keys</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="activeKeys">0</div>
                        <div class="stat-label">Active</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="loadstringCount">0</div>
                        <div class="stat-label">Protected Scripts</div>
                    </div>
                </div>
                
                <div class="btn-group">
                    <button class="btn btn-blue" onclick="showPage('keygen')">
                        <i class="fas fa-bolt"></i> Generate Keys
                    </button>
                    <button class="btn btn-green" onclick="showPage('loadstring')">
                        <i class="fas fa-shield-alt"></i> Protect Script
                    </button>
                </div>
            </div>
            
            <div class="dashboard">
                <div class="card">
                    <h3><i class="fas fa-star"></i> What Zenith Offers</h3>
                    
                    <div class="feature-card">
                        <h4>üîê Advanced Obfuscation</h4>
                        <p>Protect your Lua scripts with Zenith's advanced obfuscator that encrypts strings and variables.</p>
                    </div>
                    
                    <div class="feature-card">
                        <h4>üõ°Ô∏è Loadstring Protection</h4>
                        <p>Hide your source code while allowing authorized execution. Raw code is encrypted, only loadstring works.</p>
                    </div>
                    
                    <div class="feature-card">
                        <h4>üîë Professional Key Management</h4>
                        <p>Generate lifetime or day-locked keys, manage users, and control access with kill switch.</p>
                    </div>
                </div>
                
                <div class="card">
                    <h3><i class="fas fa-check-circle"></i> Why Use Zenith</h3>
                    
                    <div class="feature-card">
                        <h4>‚úÖ 100% Functional</h4>
                        <p>Obfuscation doesn't break your code. It remains fully executable while being protected.</p>
                    </div>
                    
                    <div class="feature-card">
                        <h4>‚ö° Easy Integration</h4>
                        <p>Simple API for key verification and script protection. Works with any Roblox executor.</p>
                    </div>
                    
                    <div class="feature-card">
                        <h4>üîí Maximum Security</h4>
                        <p>Your source code stays hidden. Users can execute but cannot view or steal your scripts.</p>
                    </div>
                    
                    <button class="btn btn-blue" onclick="showPage('loadstring')" style="width: 100%; margin-top: 1rem;">
                        <i class="fas fa-rocket"></i> Try Loadstring Protection
                    </button>
                </div>
            </div>
        </div>
        
        <!-- KEY GENERATOR -->
        <div id="keygen" class="page-content">
            <h1 style="margin-bottom: 2rem; color: var(--blue);">
                <i class="fas fa-key"></i> Key Generator
            </h1>
            
            <div class="dashboard">
                <div class="card">
                    <h3><i class="fas fa-bolt"></i> Generate Keys</h3>
                    
                    <div class="form-group">
                        <label class="form-label">Amount</label>
                        <input type="number" id="amount" class="form-input" value="10" min="1">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Type</label>
                        <select id="keyType" class="form-select">
                            <option value="lifetime">Lifetime</option>
                            <option value="day">Day-Locked</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="daysBox" style="display: none;">
                        <label class="form-label">Days</label>
                        <input type="number" id="days" class="form-input" value="30" min="1">
                    </div>
                    
                    <button class="btn btn-blue" onclick="generateKeys()" style="width: 100%;">
                        <i class="fas fa-plus"></i> Generate
                    </button>
                    
                    <div class="output" id="keyOutput">
                        Keys will appear here
                    </div>
                </div>
                
                <div class="card">
                    <h3><i class="fas fa-search"></i> Check Key</h3>
                    
                    <div class="form-group">
                        <label class="form-label">Key</label>
                        <input type="text" id="checkKey" class="form-input" placeholder="ZENITH-XXXXXXXX">
                    </div>
                    
                    <button class="btn btn-green" onclick="checkKey()" style="width: 100%;">
                        <i class="fas fa-check"></i> Verify
                    </button>
                    
                    <div class="output" id="checkResult">
                        Result...
                    </div>
                </div>
            </div>
        </div>
        
        <!-- OBFUSCATOR -->
        <div id="obfuscator" class="page-content">
            <h1 style="margin-bottom: 2rem; color: var(--blue);">
                <i class="fas fa-lock"></i> Zenith Obfuscator
            </h1>
            
            <div class="card">
                <h3><i class="fas fa-user-secret"></i> Obfuscate Lua Code</h3>
                
                <div class="form-group">
                    <label class="form-label">Paste Lua Code</label>
                    <textarea id="luaCode" class="form-textarea" placeholder="-- Your Lua code here
print('Hello Zenith')"></textarea>
                </div>
                
                <button class="btn btn-blue" onclick="obfuscateCode()" style="width: 100%;">
                    <i class="fas fa-lock"></i> Obfuscate with Zenith
                </button>
                
                <div class="form-group">
                    <label class="form-label">Obfuscated Result</label>
                    <div class="code-output" id="obfResult">
                        -- OBFUSCATED BY ZENITH
                    </div>
                </div>
            </div>
        </div>
        
        <!-- LOADSTRING PROTECTION -->
        <div id="loadstring" class="page-content">
            <h1 style="margin-bottom: 2rem; color: var(--blue);">
                <i class="fas fa-shield-alt"></i> Loadstring Protection
            </h1>
            
            <div class="dashboard">
                <div class="card">
                    <h3><i class="fas fa-code"></i> Create Protected Loadstring</h3>
                    
                    <div class="form-group">
                        <label class="form-label">Enter Lua Code to Protect</label>
                        <textarea id="loadstringCode" class="form-textarea" placeholder="-- Your secret script here
print('This code is protected by Zenith')
-- Users can execute but cannot see this code"></textarea>
                    </div>
                    
                    <button class="btn btn-blue" onclick="createLoadstring()" style="width: 100%;">
                        <i class="fas fa-shield"></i> Create Protected Loadstring
                    </button>
                    
                    <div class="output" id="loadstringOutput">
                        Your protected loadstring will appear here
                    </div>
                </div>
                
                <div class="card">
                    <h3><i class="fas fa-info-circle"></i> How It Works</h3>
                    
                    <div class="feature-card">
                        <h4>üîí Source Code Hidden</h4>
                        <p>Your original code is encrypted and stored securely. The raw source is never exposed.</p>
                    </div>
                    
                    <div class="feature-card">
                        <h4>‚ö° Execution Only</h4>
                        <p>Users get a loadstring that decrypts and executes, but they cannot view the source.</p>
                    </div>
                    
                    <div class="feature-card">
                        <h4>üîë Access Key Required</h4>
                        <p>Only clients with the correct access key can execute the loadstring.</p>
                    </div>
                    
                    <div class="output" style="margin-top: 1rem;">
                        <h4>Example Usage:</h4>
                        <pre style="color: #00cc66; font-size: 0.9rem;">
-- In Roblox:
_G.ZenithAccessKey = "YOUR_ACCESS_KEY"
loadstring(game:HttpGet("YOUR_LOADSTRING"))()</pre>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- EXPORT -->
        <div id="export" class="page-content">
            <h1 style="margin-bottom: 2rem; color: var(--blue);">
                <i class="fas fa-file-export"></i> Export Keys
            </h1>
            
            <div class="card">
                <h3><i class="fas fa-download"></i> Export Formats</h3>
                
                <div class="btn-group">
                    <button class="btn btn-blue" onclick="exportKeys('txt')">
                        <i class="fas fa-file-alt"></i> TXT
                    </button>
                    <button class="btn btn-blue" onclick="exportKeys('json')">
                        <i class="fas fa-code"></i> JSON
                    </button>
                    <button class="btn btn-blue" onclick="exportKeys('csv')">
                        <i class="fas fa-table"></i> CSV
                    </button>
                </div>
                
                <div class="output" id="exportInfo">
                    Select format to export
                </div>
            </div>
        </div>
        
        <!-- KILL SWITCH -->
        <div id="killswitch" class="page-content">
            <h1 style="margin-bottom: 2rem; color: var(--blue);">
                <i class="fas fa-power-off"></i> Kill Switch
            </h1>
            
            <div class="card">
                <h3><i class="fas fa-skull"></i> System Control</h3>
                
                <div class="output" id="killStatus">
                    Status: <span style="color: var(--green)">ACTIVE</span>
                </div>
                
                <div class="btn-group">
                    <button class="btn btn-red" onclick="toggleKill('enable')">
                        <i class="fas fa-skull"></i> ENABLE
                    </button>
                    <button class="btn btn-green" onclick="toggleKill('disable')">
                        <i class="fas fa-play"></i> DISABLE
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- FOOTER -->
    <div class="footer">
        <p>Zenith Key System | Port: {{ port }}</p>
    </div>
    
    <script>
        // Page Management
        function showPage(page) {
            document.querySelectorAll('.page-content').forEach(p => {
                p.style.display = 'none';
            });
            document.getElementById(page).style.display = 'block';
        }
        
        // Sidebar
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }
        
        // Stats
        async function loadStats() {
            try {
                const res = await fetch('/api/stats');
                const data = await res.json();
                
                document.getElementById('totalKeys').textContent = data.total;
                document.getElementById('activeKeys').textContent = data.active;
                document.getElementById('loadstringCount').textContent = data.loadstrings || 0;
            } catch(e) {
                console.error(e);
            }
        }
        
        // Key Generation
        document.getElementById('keyType').addEventListener('change', function() {
            document.getElementById('daysBox').style.display = 
                this.value === 'day' ? 'block' : 'none';
        });
        
        async function generateKeys() {
            const amount = document.getElementById('amount').value;
            const type = document.getElementById('keyType').value;
            const days = type === 'day' ? document.getElementById('days').value : null;
            
            const res = await fetch('/api/generate', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({amount, type, days})
            });
            
            const data = await res.json();
            if(data.success) {
                document.getElementById('keyOutput').innerHTML = 
                    data.keys.map(k => `<div>${k}</div>`).join('');
                loadStats();
                alert(`Generated ${data.keys.length} keys`);
            }
        }
        
        // Check Key
        async function checkKey() {
            const key = document.getElementById('checkKey').value;
            const res = await fetch(`/api/check/${key}`);
            const data = await res.json();
            
            const result = document.getElementById('checkResult');
            if(data.valid) {
                result.innerHTML = `<div style="color: #00cc66">‚úÖ Valid (${data.type})</div>`;
            } else {
                result.innerHTML = `<div style="color: #ff3333">‚ùå ${data.error}</div>`;
            }
        }
        
        // Obfuscator
        async function obfuscateCode() {
            const code = document.getElementById('luaCode').value;
            const res = await fetch('/api/obfuscate', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({code})
            });
            
            const data = await res.json();
            if(data.success) {
                document.getElementById('obfResult').textContent = data.obfuscated;
                alert('Code obfuscated with Zenith');
            }
        }
        
        // Loadstring Protection
        async function createLoadstring() {
            const code = document.getElementById('loadstringCode').value;
            if(!code || code.length < 10) {
                alert('Please enter valid Lua code (min 10 characters)');
                return;
            }
            
            const res = await fetch('/api/loadstring/create', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({code})
            });
            
            const data = await res.json();
            if(data.success) {
                const output = document.getElementById('loadstringOutput');
                output.innerHTML = `
                    <div style="color: #00cc66; margin-bottom: 1rem;">
                        <strong>‚úÖ Loadstring Created Successfully!</strong>
                    </div>
                    <div style="margin-bottom: 0.5rem;">
                        <strong>Loadstring ID:</strong> ${data.loadstring_id}
                    </div>
                    <div style="margin-bottom: 0.5rem;">
                        <strong>Access Key:</strong> ${data.access_key}
                    </div>
                    <div style="margin-bottom: 1rem; color: #ff9900;">
                        <strong>‚ö†Ô∏è SAVE THE ACCESS KEY! It is required for execution.</strong>
                    </div>
                    <div style="background: #111; padding: 1rem; border-radius: 6px; overflow-x: auto;">
                        <pre style="color: #00cc66; font-size: 0.8rem; margin: 0;">${data.loadstring_code}</pre>
                    </div>
                `;
                
                loadStats();
            }
        }
        
        // Kill Switch
        async function toggleKill(action) {
            const res = await fetch(`/api/killswitch/${action}`);
            const data = await res.json();
            
            const status = document.getElementById('killStatus');
            if(action === 'enable') {
                status.innerHTML = 'Status: <span style="color: #ff3333">üö® KILL SWITCH ACTIVE</span>';
            } else {
                status.innerHTML = 'Status: <span style="color: #00cc66">‚úÖ SYSTEM ACTIVE</span>';
            }
            
            alert(data.status);
            loadStats();
        }
        
        // Export
        function exportKeys(format) {
            window.open(`/api/export/${format}`, '_blank');
            document.getElementById('exportInfo').innerHTML = 
                `Exporting in ${format.toUpperCase()} format...`;
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadStats();
            setInterval(loadStats, 5000);
            showPage('home');
        });
    </script>
</body>
  </html>
